script(src="poll.js")
h1(id="header-title") #{poll.question}
hr(class="title-hr")
h2(class="poll-author vert-rule-r") Created by #{poll.pollOwner[0].userName}
div(id="fb-root")
div(class="row")
    div(class="col-md-4 poll-options-pane")
        h2(class="subcontainer-head")
            i(class="fa fa-check-square-o icon-vote")
            | Vote
        div(id="vote-pane")
            form(action="/submit-vote" id="vote-form" method="post")
                p Select an #[u o]ption:
                //- This input makes sure we POST the poll id a vote is being submitted for
                input(type="hidden" name="poll-id")&attributes({'value': poll._id.toString()})
                select(accesskey="o" id="vote-dropdown" name="vote-selection")
                    option(value="unchosen") -------------
                    each val, index in poll.options
                        option(value=index) #{val}
                    if (typeof username !== 'undefined')
                        option(value="addNew") (add a custom option)
                div(id="custom-option-pane" style="display:none")
                    label(for="custom-option-input" class="custom-label") add your own option
                    input(id="custom-option-input" name="custom-vote" type="text")
                button(accesskey="v" form="vote-form" type="submit" id="cast-vote-button" disabled) Cast #[u V]ote
        if typeof userName != 'undefined'
            div(id="sharing-pane")
                a(href="#" id="share-btn")
                    i(aria-hidden="true" class="fa fa-share-alt-square" style="display: inline !important;")
                    | Share
                div(id="share-links-pane")
                    div
                        input(type="text" id="share-link")
                        button(aria-label="Copy link" class="cb-copy" data-clipboard-target="#share-link" id="cb-copy" type="button")
                            i(aria-hidden="true" class="fa fa-files-o")
                            |  Copy
                    div(class="fb-share-button"
                        data-href= pollURL
                        data-layout="button"
                        data-mobile-iframe="true")
                        a(class="fb-xfbml-parse-ignore" 
                        target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=" + pollURL) Share
            if (poll.pollOwner[0].userName == userName && poll.pollOwner[0].userId == userId && poll.pollOwner[0].userProvider == userProvider)
                div(id="remove-pane")
                    a(href="#" id="delete-btn")
                        i(aria-hidden="true" class="fa fa-trash-o" style="display: inline !important;")
                        | Delete Poll
                    div(id="confirm-delete-pane")
                        | Are you sure you want to delete this poll?
                        button(aria-label="Delete" id="dp-button" type="button")
                            i(aria-hidden="true" class="fa fa-times" style="display: inline !important;")
                            |  Delete
    //- The client JS will use this ID to append an SVG with the poll results
    div(class="col-md-8 poll-results-pane" id="poll-results-pane")
        h2(class="subcontainer-head")
            span(class="glyphicon glyphicon-blackboard icon-results")
            | Results
        div(id="chart-container")
        div(id="results-legend")